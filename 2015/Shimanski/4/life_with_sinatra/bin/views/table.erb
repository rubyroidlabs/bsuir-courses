<!DOCTYPE html>
<html>

    <head>

      <title>
        Life!
      </title>

      <style>

          a {
              font-size: 20px;
              margin: 15px 15px;
              width: 40px;
              display: inline;
              border: none;
              padding: 5px 0;
              border-bottom: solid 1px #1abc9c;
              -webkit-transition: all 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);
              transition: all 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);
              background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 96%, #1abc9c 4%);
              background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 96%, #1abc9c 4%);
              background-position: -100px 0;
              background-size: 100px 100%;
              background-repeat: no-repeat;
              color: #0e6252;
          }

          body {
              text-align: center;
              background-color: #f9f9f9;
              font-family: RobotoDraft, 'Helvetica Neue', Helvetica, Arial;
          }

          div{
              display: inline-block;
              text-align: center;
          }

          tr{
              color: #0e6252;
              text-align: center;
              fon-size: 25px;
              width: auto;
              display: block;
          }

          td{
              width: 30px;
          }

      </style>

    </head>

    <body>

        <div>
            <table>
              <% 0.upto(@life.matrix_h - 1) do |i| %>
                  <tr>
                    <% 0.upto(@life.matrix_w - 1) do |j| %>
                        <td>
                          <% if @life.matrix[i][j] == 1 %>
                              *
                          <% else %>
                              .
                          <% end %>
                    <% end %>
                    </td>
              <% end %>
              </tr>
            </table>
        </div>

        <br>
        <br>

        <div>
          <a href="/">Main page</a>
        </div>

        <div>
          <a href="/table">Do iteration</a>
        </div>

        <div>
          <a id="autoIteration" href="#" onclick=""></a>
        </div>

        <script>

            function startTimer(period) {
                window.localStorage.setItem("next-iteration", "true");
                document.getElementById("autoIteration").innerHTML = "Slideshow OFF";
                document.getElementById("autoIteration").onclick = function(){stopTimer()}
                setTimeout(nextIteration, period);
            }

            function init() {
                setInterval(nextIteration, 1000);
                if(window.localStorage.getItem("next-iteration") == "true") {
                    document.getElementById("autoIteration").innerHTML = "Slideshow OFF";
                    document.getElementById("autoIteration").onclick = function(){stopTimer()}
                }
                else {
                    document.getElementById("autoIteration").innerHTML = "Slideshow ON";
                    document.getElementById("autoIteration").onclick = function () {
                        startTimer(1000);
                    }
                }
            }

            function nextIteration(){
                if(window.localStorage.getItem("next-iteration") == "true"){
                    location.href = "table";
                }
            }
            function stopTimer(){
                window.localStorage.setItem("next-iteration", "false");
                document.getElementById("autoIteration").innerHTML = "Slideshow ON";
                document.getElementById("autoIteration").onclick = function () {
                    startTimer(1000);
                }
            }

            init();
        </script>

    </body>

</html>

