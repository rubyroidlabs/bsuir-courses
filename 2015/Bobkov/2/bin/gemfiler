Dir['./../lib/*.rb'].each{ |f| require(f) }

if ARGV.size < 2
  raise ArgumentError
end

name, specifier, specifier2 = ARGV

unless (name =~ /\w+/) && (specifier =~ /(~>|>=|<=|<|>)\s(\d+\.)*\d+/)
  raise ArgumentError
end

if (specifier2 =~ /(<|<=)\s(\d+\.)*\d+/)
  bl = true
else
  if (specifier2 =~ /^.*/)
    raise ArgumentError
  else
    bl = false
  end
end

versions = VersionFetcher.new(name).fetch
if (bl == true)
  filtered_versions = VersionFilter.new(versions).filter2(specifier,specifier2)
else
  filtered_versions = VersionFilter.new(versions).filter(specifier)
end
Visualiser.new(versions).visualise(filtered_versions)
